"""
Generated by Metaproject.

Shared methods for tests.

Location: tests/generated/shared_test_methods.py
"""
import os
import re
import shutil
import pathlib


def set_up(test):
    """
    Set up the test environment.
    """
    fixtures: pathlib.Path = (pathlib.Path(__file__) / "../../fixtures").resolve()
    workspace: pathlib.Path = fixtures / "workspace"
    install_path: pathlib.Path = fixtures / "install"
    projects_path: pathlib.Path = fixtures / "project"
    test.fixtures = fixtures
    test.workspace = workspace
    test.projects_path = projects_path
    test.install_path = install_path


def tear_down(test, to_be_removed=None):
    """
    Clear mediator.

    Remove fixtures.
    """
    if not re.search("fixtures", str(test.fixtures)):
        raise ValueError("Invalid path")

    if not to_be_removed:
        to_be_removed = []

    for file in to_be_removed:
        path = os.path.join(test.fixtures, file)
        if os.path.isfile(path):
            os.remove(path)
        elif os.path.isdir(path):
            shutil.rmtree(path)
